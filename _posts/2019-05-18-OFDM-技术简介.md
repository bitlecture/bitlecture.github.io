---
layout: post
comments: true
title:  "OFDM 技术简介"
excerpt: "-"
date:   2019-05-18 12:42:24 +0000
categories: Notes
---

<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
---

[TOC]

{% comment %}

## MIMO 信道模型

## 1. MIMO统计信道模型

首先考虑`SIMO`模型，单天线发射，多天线接收的模型，我们假设接受阵列是一个线性阵列，则容易计算其流形矩阵，此时可以考虑方向场问题，不过不会对推导产生较大影响。可以将信号传递的信道看成是一个受角度与延迟影响的矩阵，则可以根据阵列天线的特性求解`PADS`以及相应的`PAS`和`PDS`，即功率方位-延迟谱、功率方位（角度）谱、功率时延谱。发射天线的阵列间隔一般是$$\lambda/2$$，而接收基站之间的距离往往是$$10-40\lambda$$。`PDS`的中心距（其实就是方差）被称为时延扩展，一般是指数函数的分布（即拉普拉斯分布）。

这里需要知道 ，功率时延谱是离散谱线，衰减；功率角度谱一般是拉普拉斯衰减；而`AoA`往往是以真实方向为中心的高斯分布。

### 1.1 空间相关性

以两个天线为例，两个天线接收到的信号实际上只是存在一个与方向（角度）相关的相位差而已，通过计算相关函数很容易得到空间相关函数（注意要计算共轭）。

计算得到空间相关性取决于`AoA`，`PAS`，以及天线间距（直接影响延迟）。天线之间的间距会影响到相关性，而相关性较大的时候会降低信道容量和分集增益，因此要保证较大的间隔，主要为了降低相关性。

### 1.2 PAS模型

$$P(\varPhi)$$实际上个就是所谓的`PAS`，这样一看其实就类似于我们在功率谱估计课程中得到的结果。在不同的地方测得的结果往往是不同的。一般建模会认为，移动台处的`PAS`模型是各种不同分布，但是在基站处往往是均匀分布的。

一般而言`PAS`的`AS`是很小的，这意味着所有信号在大多数情况下都是以一个很小的方向范围入射的，这也表示了`PAS`往往稀疏。但是在室内等条件下，`PAS`的角度范围就会很大，并呈现出一定的均匀分布特点。常见模型有

- 余弦`n`次幂模型。随着`n`增大，`PAS`变窄。此时的相关函数没有显式的表达。
- 均匀分布模型。富散射场景（例如室内建模），在给定角度中是均匀分布的。此时的空间相关函数是贝塞尔函数组合形式。
- 截断高斯模型。随着方差增大，`AS`增大。由于截断，所以需要归一化因子。
- 截断拉普拉斯模型。用于宏蜂窝和微蜂窝环境 ，功率分布为截断的双边指数分布。

通过上述的建模与运算，我们可以有效设置天线间隔等参数。

另外存在一个多簇的问题。除了本地散射分量外，在移动台附近还存在主散射分量，则移动台将接受到具有不同到达角和`PAS`的多簇信号。室内可以观察到，



## 2. I-METRA MIMO信道

### 2.1 相关MIMO衰落信道的统计模型

智能多发多收天线模型，常用与`MIMO`建模。

假设基站`M`天线，移动台`N`根天线。已知发射接收天线阵列的相关形式，理论上可以构造任意的`MIMO`信道。

瑞利衰落信道。对于窄带高斯过程，其包络或者说能量是服从瑞利分布的，我们称这样的信道是瑞利信道。衰落的概念就是，信号在经过信道之后出现了包络的变化，由于包络是瑞利的，所以是瑞利衰落信道。一般此时的信道矩阵就是iid高斯分布的，恒包络窄带信号经过这样的信道，其包络就是瑞利分布。



由于我们假设信号的实部虚部都是服从高斯分布的，因此信号的模就是服从瑞利分布的。在典型的场景中，一般会让移动台处的天线间距大于等于$$\lambda/2$$来避免接收信号的相关性。

### 2.2 相关MIMO信道系数产生

没啥子可说的，都看不懂

### 2.3 I-METRA MIMO信道模型

莱斯衰落就是存在直通主径传输的条件下的瑞利衰落。

---

看了一整天，要不就是我看不懂，要不就是我早就会了的东西。

{% endcomment %}

*之前写了点MIMO的，但是我水平还是太菜了，写的很烂，就注释掉了。*





## OFDM概述

## 单载波传输与多载波传输

### 单载波传输

单载波传输方案是本科通信原理中主要介绍的传输方案。单载波调制方法难以实现高速率传输。为了支持每秒传输$$R_S$$的符号速率，所需要的最小带宽是奈奎斯特带宽，即$$\frac {R_S} 2 \:$$`Hz`。这意味着在单载波传输系统中，需要更大的传输**带宽**来支持更高的**速率**。信号带宽随着符号速率的增大而增大，当带宽终于大于无线信道的相干带宽时，链路将受到多径衰落的影响，从而产生`ISI`。

> 多径衰落造成的影响是频率选择性衰落，这表现为信道的频域响应是一条复杂的曲线。我们假设发射的是恒包络信号，那么在经过信道后，不同频率将展现为不同的振幅大小（甚至不同的相位），这将对信号的接收带来极大的不利。尤其是许多调制方式依赖于幅度和相位对信号进行解调恢复，在信道不做均衡时，误码率很容易达到`50%`，这意味着接收机完全不能接收到正确的信号。
>
> 一般的我们把选择性衰落中响应近似为平坦的区域的频域长度称为相干带宽，在不同的多径条件下，相干带宽是不同的，可以说相干带宽取决于不同的时延扩展。简单地说，我们可以认为多径模型是同一个信号的不同延时的线性组合。不过实际多径信道的模型会更为复杂，因为系统总是离散的，其延时与采样频率之间的关系以及多普勒频移问题等的影响会复杂化模型。（这些以后会改吧大概，现在我对信道模型的理解也十分的浅薄）

在这种情况下可能需要更为复杂的均衡器对结果进行校正，但是越复杂的均衡器也越难以设计，且导致更大的延迟等问题。

在多径信道中部署均衡器也会变得越来越困难，因为最优均衡器采用最大似然方法最大化后验概率判决，其复杂度很高，采用次优均衡器在数据速率较大的时候仍然是复杂度极高的，难以在实际中实现——信道频率选择性增加，均衡器的频响变得更为陡峭。

> 关于均衡器设计，在单载波传输中的确需要一定的计算量，如果追求最优性那复杂度的确要高。最大似然方法往往就可以看作是一种穷举暴搜的方法。

这些是在说，单载波实现高速率是不可行的，不仅是相干带宽中导致`ISI`的问题，还有均衡器难以设计的问题。

### 多载波传输

为了克服所谓的宽带信道频率选择性对单载波传输的影响，自然就是考虑多载波。多载波传输的基本思想是，在发射机上采用多个窄带滤波器，**将宽带信号分解为若干窄带信号**；接收机上同样设置相匹配的窄带滤波器将信号进行合成。这样，**一个频率选择性衰落信道将被近似地划分为若干个平坦的窄带信道**，其非频率选择性将可以降低每个子信道上均衡器的复杂度。如果可以保证信道之间的正交性，就可以抑制载波之间的干扰，实现无失真（码间串扰）传输。可以将多载波看作是频分多址`FDMA`的思想。

不过虽然这种方法解决了频率选择性衰落的问题，但是却带来了新的问题。振荡器的精度以及滤波器的设计等问题变得更加复杂，甚至还需要配套设计更多的编解码器（以保证正交性）。

`OFDM`方案是多载波传输方案中一种较为重要的方案，相比于多载波传输方式，OFDM方式并没有设计多滤波器振荡器，而是巧妙利用了傅里叶变换的形式，而且子载波功率谱之间是相互重叠的（为了带宽效率）。和上述的将宽带信号分为若干正交子信道不完全相同，OFDM只是将信号调制在指定的正交载频上后，直接做傅里叶反变换得到结果。不过这恰好避免了一些设计难度。

#### FMT传输方案

就是传统的多载频方案。对串行传并行后的信号做过采样，经过正交滤波器组后发射，匹配滤波接收后进行同样倍数下采样判决。

## OFDM基本原理

首先强调一下正交性。频域的不同复载频是相互正交的，互相之间内积为`0`。正交性保证了`OFDM`不会出现载波之间的互相干扰`ICI`。正交性的判断方式是两个不同频率信号在一个公共周期（基本周期）内的乘积的积分（或离散求和）为$$0$$。 

### OFDM 调制解调

发射机调制主要是将信息比特流映射为`PSK`或`QAM`符号序列，然后将序列转换为`N`个并行流。并行流与正交载频调制之后的形式恰好是傅里叶变换中频域的形式，此时如果进行反变换恰好得到串行时域信号，这也就是一个`OFDM`符号。反过来，接收机只需要进行一次傅里叶变换就可以得到原来的并行信号，而且这样处理的好处是，经过信道后的信号已经出现了频率选择性衰落，而接收机进行`fft`之后恰好可以方便对信道进行补偿均衡。

### OFDM 保护间隔

由于多径信道产生的影响，我们需要对`OFDM`做一些处理。

多径信道的时域响应较为复杂，也正因如此出现了频域的陷落，出现频率选择性衰落。这时由于多径影响，原本正交的载频由于相位问题就不再正交了，出现了强相关性。改进方法是增加保护间隔。

需要保护间隔是因为多径效应，这样不同时到达的信号就会叠加在一起，导致出现串扰，时域的延迟相当于频域发生了相移。为防止前一个符号由于延迟影响到下一个符号，一般在两个符号之间增加保护间隔。保护间隔的长度，根据经验一般取稍大于最大的时延扩展。仿真时一般增加为`fft`长度的`25%`。

保护间隔的插入方法有两种，一种是补零`ZP`，一种是循环前缀`CP`或循环后缀`CS`。如果保护间隔大于最大时延，此时就可以避免因时延而产生的串扰，让符号独立开。而这种复制还**有利于保持载波的正交性**。当然即使是这样，在同步信号没有选择正确的时候，`FFT`窗的位置没有正确选择，仍然会有`ISI`或者`ICI`产生。关于同步和FFT窗的问题，我们会在后面进行讨论。

循环后缀方法似乎主要是用来添加升余弦窗的，不添加的时候或者面对简单的建模问题，不需要刻意添加循环后缀。

### OFDM 保护频带

对于一个长度有限的`OFDM`符号，其功率谱是`sinc`函数的移位和。原因是截断的OFDM信号相当于矩形窗加在反变换的结果中，而反变换的矩形窗在变换域中是`Sinc`函数函数的形式，对不同载频上的信号做卷积。而不同载频由于OFDM的特殊调制方式，不存在每一个子频带带宽，因此结果就是移位求和的`Sinc`形式。根据这种表示方式我们可以知道，OFDM的带外功率实际上很大，为了降低带外功率（让带外功率快速过渡下降到`0`），提高效率，我们可以使用低通滤波器直接滤掉多余的功率，处理后再发射，但是为了达到可接受的性能指标需要不小的复杂度。所以人们往往会选择加时域成型窗函数，例如升余弦窗。这样频域将会卷积一个下降更快的窗。从而使功率谱可以更快地过渡为`0`。

### OFDM 误码率

略

> 今后将在这里补充一个OFDM的完整仿真过程。

### 频域注水算法









